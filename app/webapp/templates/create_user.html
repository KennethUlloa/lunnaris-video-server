{% extends "base.html" %}

{% block head %}
<script src="/js/jquery.js"></script>
<title>Registro de usuarios</title>
{% endblock %}

{% block body %}
    <h1 class="ln-flex-row ln-jc-center ln-p-3">Lunnaris Video Server</h1>
    <p class="ln-flex-row ln-jc-center ln-p-3">
        Registro de usuario
    </p>
    <div class="ln-flex-column ln-ai-center">
        <form action="" class="ln-flex-column ln-w-70 ln-gap-2" id="user-form">
            <label>Usuario</label>
            <input type="text" name="username" class="input-type ln-mb-3" 
            pattern="[a-zA-Z]{1,}[a-zA-Z0-9]{5,}"
            placeholder="Longitud de 6 caracteres entre letras y números iniciando con una letra"
            />
            <label>Nombre mostrado</label>
            <input type="text" name="displayName" class="input-type ln-mb-3" 
            required placeholder="Longitud de 6 caracteres entre letras y números" />
            <label>Nueva contraseña</label>
            <input type="password" name="password" class="input-type ln-mb-3" required 
            placeholder="Ingresa la contraseña actual de la cuenta">

            <label>Confirme la contraseña</label>
            <input type="password" name="confirmPassword" class="input-type ln-mb-3" 
            pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}$"
            placeholder="Nueva contraseña: longitud mínima de 8 caracteres y al menos un número"
            required
            >
            <label>Permisos</label>
            <select name="type" class="input-type">
                {% for permission in options %}
                    <option>{{ permission }}</option>
                {% endfor %}
            </select>
            <input type="submit" class="input-type" value="Guardar">
            
        </form>
    </div>
    <script src="/js/adminuser.js"></script>
    <script>
        $("#user-form").submit(function(e) {
            e.preventDefault();
            createUser(form2Json(e.target))
        })
    </script>
{% endblock %}